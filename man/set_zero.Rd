% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/set_zero.R
\name{set_zero}
\alias{set_zero}
\title{Set Values Near Zero to Exact Zero}
\usage{
set_zero(x)
}
\arguments{
\item{x}{Numeric vector or matrix. Values with absolute value â‰¤ 2^-43
will be set to exactly 0.}
}
\value{
Object of the same type and dimensions as \code{x}, with near-zero
values replaced by exact zero.
}
\description{
Replaces values that are very close to zero (within machine precision
tolerance) with exact zero. This prevents issues with floating-point
arithmetic where values should be zero but are represented as extremely
small non-zero numbers.
}
\details{
Floating-point arithmetic can produce values that are mathematically zero
but are represented as very small numbers (e.g., 1e-16) due to rounding
errors. This function identifies such values and replaces them with exact zero.

\strong{Threshold Choice:}
The threshold \code{2^-43} (approximately 1.136e-13) is chosen because:
\itemize{
\item It's well above typical double-precision floating-point errors
\item It's small enough to not affect meaningful small values
\item It corresponds to roughly 13 decimal places of precision
}

\strong{Use Cases:}
\itemize{
\item Cleaning up results from matrix operations
\item Preparing values for conditional tests (e.g., \code{if (x == 0)})
\item Improving numerical stability in iterative algorithms
\item Making output more readable by removing "noise" near zero
}
}
\note{
This is a utility function typically used internally in statistical
computations. It does not validate inputs for performance reasons, assuming
it will be called with numeric data.

\strong{Performance:} This function is vectorized and very fast, with negligible
overhead even for large matrices.
}
\examples{
# Simple vector example
x <- c(1, 1e-50, 2, -1e-45, 3)
set_zero(x)
# Returns: c(1, 0, 2, 0, 3)

# Matrix from computation that should be zero
A <- matrix(c(1, 0, 0, 1), 2, 2)
B <- matrix(c(1, 0, 0, 1), 2, 2)
diff <- A - B  # Should be zero matrix but may have tiny values
set_zero(diff)

# Cleaning up covariance matrix
cov_matrix <- matrix(c(1.0, 1e-50, 1e-50, 1.0), 2, 2)
set_zero(cov_matrix)

# Values larger than threshold are preserved
x <- c(1e-10, 1e-12, 1e-14)
set_zero(x)
# Returns: c(1e-10, 1e-12, 0)

}
